<section class="bg-main-light p-2 w-75 mx-auto shadow my-3">
    <h1 class="text-main">Register Now :</h1>
    @if(responseMessage){
        <p class="alert alert-danger p-2 my-2 w-50 text-center mx-auto">{{responseMessage}}</p>
    }
    <form [formGroup]="registerForm"  (ngSubmit)="registerUser()">
        <div class="my-2">
            <label class="mb-2" for="name"><span class="text-danger">*</span>Name</label>
            <input [ngClass]="{
                'is-valid' : !registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty),
                'is-invalid' : registerForm.get('name')?.errors && (registerForm.get('name')?.touched || registerForm.get('name')?.dirty)
            }" formControlName = "name" type="text" id="name" class="form-control">
            @if(registerForm.get("name")?.errors && registerForm.get("name")?.touched){
                <div class="alert alert-warning p-2 my-2 fs-6 fw-bold">
                    @if(registerForm.get("name")?.getError("required")){
                        <p class="m-0">Name is Required</p>
                    }
                    @else if (registerForm.get("name")?.getError("minlength")) {
                        <p class="m-0">Name must be at least 3</p>
                    }
                    @else if (registerForm.get("name")?.getError("maxlength")) {
                        <p class="m-0">Name must be Maximum 10</p>
                    }
                </div> 
            }
        </div>
        <div class="my-2">
            <label class="mb-2" for="email"><span class="text-danger">*</span>ŸèEmail</label>
            <input [ngClass]="{
                'is-valid' : !registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
                'is-invalid' : registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)
            }" formControlName="email" type="email" id="email" class="form-control">
            @if(registerForm.get("email")?.errors && registerForm.get("email")?.touched){
                <div class="alert alert-warning p-2 my-2 fs-6 fa-bold">
                    @if(registerForm.get("email")?.getError("required")){
                        <p class="m-0">Email is Required</p>
                    }
                    @else if(registerForm.get("email")?.getError("email")){
                        <p class="m-0">Email format is Not Correct</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label class="mb-2" for="password"><span class="text-danger">*</span>Password</label>
            <input [ngClass]="{
                'is-valid' : !registerForm.get('password')?.errors && (registerForm.get('email')?.touched || registerForm.get('password')?.dirty),
                'is-invalid' : registerForm.get('password')?.errors && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)
            }" formControlName="password" type="password" id="password" class="form-control">
            @if(registerForm.get("password")?.errors && registerForm.get("password")?.touched){
                <div class="alert alert-warning p-2 my-2 fs-6 fa-bold">
                    @if(registerForm.get("password")?.getError("required")){
                        <p class="m-0">Password is Required</p>
                    }
                    @else if(registerForm.get("password")?.getError("pattern")){
                        <p class="m-0">Password must be at least 6</p>
                    }
                </div>
            }
        </div>
        <div class="my-2">
            <label class="mb-2" for="repassword"><span class="text-danger">*</span>RePassword</label>
            <input [ngClass]="{
                'is-valid' : !registerForm.getError('MissMatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty),
                'is-invalid' : registerForm.getError('MissMatch') && (registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty)
            }" formControlName="rePassword" type="password" id="repassword" class="form-control">
            @if(registerForm.getError("MissMatch") && registerForm.get("rePassword")?.touched){
                <div class="alert alert-warning p-2 my-2 fs-6 fa-bold">
                    <p class="m-0">Confirm Password is Not Correct</p>
                </div>
            }
        </div>
        <div class="my-2">
            <label class="mb-2" for="phone"><span class="text-danger">*</span>Phone</label>
            <input [ngClass]="{
                'is-valid' : !registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty),
                'is-invalid' : registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty)
            }" formControlName="phone" type="tel" id="phone" class="form-control">
            @if(registerForm.get("phone")?.errors && registerForm.get("phone")?.touched){
                <div class="alert alert-warning fs-6 fa-bold p-2 my-2">
                    @if(registerForm.get("phone")?.getError("required")){
                        <p class="m-0">Phone is Required</p>
                    }
                    @else if(registerForm.get("phone")?.getError("pattern")){
                        <p class="m-0">Phone must be Egyptian</p>
                    }
                </div>
            }
        </div>
        <div class="text-center">
            <button type="submit" [disabled]="registerForm.invalid" class="btn-main my-2">
                Submit
                @if(loading){
                    <span><i class="fa-solid fa-spinner fa-spin"></i></span>
                }
            </button>
        </div>
    </form>
</section>